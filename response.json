{
    "data": {
        "post": {
            "title": "Building a Data Lake on Google Cloud Platform",
            "createdAt": 1646039967239,
            "creator": {
                "id": "f52f0c0dc336",
                "name": "Md Hishaam Akhtar"
            },
            "content": {
                "bodyModel": {
                    "paragraphs": [
                        {
                            "name": "b715",
                            "text": "Building a Data Lake on Google Cloud Platform",
                            "type": "H3",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "f63c",
                            "text": "",
                            "type": "IMG",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": null,
                            "metadata": {
                                "id": "1*xtYa5no-I247vPiC7wFOFA.png",
                                "originalWidth": 916,
                                "originalHeight": 407
                            }
                        },
                        {
                            "name": "1f9b",
                            "text": "Ever since computers have come into the picture, we have tried to find ways for the computer to store some information. This information that is stored on a computer, which is also called data, is done in several forms. Data has become so important that information has now become a commodity that is available at our fingertips.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "a637",
                            "text": "Data has been stored in computers in a variety of ways over the years, including databases, blob storage, and other methods. In order to do effective business analytics, the data created by modern applications must be processed and analyzed. And the volume of data produced is enormous! It’s critical to store petabytes of data effectively and have the necessary tools to query it in order to work with it. Only then can the analytics on that data produce meaningful results.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "2184",
                            "text": "Big data is a discipline that deals with methods for analyzing, methodically extracting information from, or otherwise dealing with data volumes that are too massive or complicated for typical data-processing application software to handle. To handle the data generated by modern applications, the application of Big Data is very necessary.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "0295",
                            "text": "With that in mind, this blog aims to provide a small tutorial on how to create a data lake that reads any changes from an application's database and writes it to the relevant place in the data lake. The tools we shall use for this are as follows:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "c15c",
                            "text": "Debezium",
                            "type": "ULI",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://debezium.io",
                                    "userId": null,
                                    "start": 0,
                                    "end": 8,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 0,
                                    "end": 8,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "cb8c",
                            "text": "MySQL",
                            "type": "ULI",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://www.mysql.com",
                                    "userId": null,
                                    "start": 0,
                                    "end": 5,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 0,
                                    "end": 5,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "a28f",
                            "text": "Apache Kafka",
                            "type": "ULI",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://kafka.apache.org",
                                    "userId": null,
                                    "start": 0,
                                    "end": 12,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 0,
                                    "end": 12,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "be3f",
                            "text": "Apache Hudi",
                            "type": "ULI",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://hudi.apache.org",
                                    "userId": null,
                                    "start": 0,
                                    "end": 11,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 0,
                                    "end": 11,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "f4ed",
                            "text": "Apache Spark",
                            "type": "ULI",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://spark.apache.org",
                                    "userId": null,
                                    "start": 0,
                                    "end": 12,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 0,
                                    "end": 12,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "011d",
                            "text": "The architecture of what we will be building is as below:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "7012",
                            "text": "Architecture of the Data Lake",
                            "type": "IMG",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": null,
                            "metadata": {
                                "id": "1*RNKyx5q69Y-__SwNBZD9cQ.png",
                                "originalWidth": 3362,
                                "originalHeight": 1554
                            }
                        },
                        {
                            "name": "b0d4",
                            "text": "The first step is to use Debezium to read all the changes happening in a relational database and push all that to a Kafka Cluster.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "13b9",
                            "text": "Debezium is an open-source distributed platform for change data capture. Debezium can be pointed at any relational database and it can start capturing any data change as it happens in real-time. It is very fast and durable. It is maintained by Red Hat.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "c70f",
                            "text": "Firstly, we shall use docker-compose to set up a Debezium, MySQL, and Kafka on our machine. You can also use independent installations of those. We shall be using the mysql image provided to us by Debezium as it contains data already inside it. In any production environment, proper clusters of Kafka, MySQL, and Debezium can be used. The docker compose file is as below:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 22,
                                    "end": 36,
                                    "anchorType": null
                                },
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 167,
                                    "end": 172,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "eadc",
                            "text": "",
                            "type": "IFRAME",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": {
                                "mediaResource": {
                                    "href": "https://gist.github.com/mdhishaamakhtar/e820fd2a97288a6253397823c340992d",
                                    "iframeSrc": "",
                                    "iframeWidth": 0,
                                    "iframeHeight": 0
                                }
                            },
                            "metadata": null
                        },
                        {
                            "name": "9742",
                            "text": "The DEBEZIUM_VERSION can be set as 1.8. Also, make sure to set MYSQL_ROOT_PASS, MYSQL_USER and MYSQL_PASSWORD.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 4,
                                    "end": 20,
                                    "anchorType": null
                                },
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 35,
                                    "end": 38,
                                    "anchorType": null
                                },
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 63,
                                    "end": 78,
                                    "anchorType": null
                                },
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 80,
                                    "end": 90,
                                    "anchorType": null
                                },
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 95,
                                    "end": 109,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "9bde",
                            "text": "Before we go forward, we shall look at the structure of the database inventory which is provided to us by the debezium image. To enter the command line of the database:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 69,
                                    "end": 78,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "cc16",
                            "text": "",
                            "type": "IFRAME",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": {
                                "mediaResource": {
                                    "href": "https://gist.github.com/mdhishaamakhtar/fbdd51aa05691cc0ddd9450b1ed0ae5f",
                                    "iframeSrc": "",
                                    "iframeWidth": 0,
                                    "iframeHeight": 0
                                }
                            },
                            "metadata": null
                        },
                        {
                            "name": "5923",
                            "text": "Inside the shell, we can make use of show tables; command. The output should be something like this:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 37,
                                    "end": 49,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "fa7d",
                            "text": "Sample Tables in MySQL",
                            "type": "IMG",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": null,
                            "metadata": {
                                "id": "1*SafBcT0_gPgPlu5yN2eqlA.png",
                                "originalWidth": 548,
                                "originalHeight": 540
                            }
                        },
                        {
                            "name": "29c5",
                            "text": "We can check the contents of the customer table by using select * from customers; command. The output should be something like this:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 57,
                                    "end": 81,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "76b2",
                            "text": "Data for Customers Table",
                            "type": "IMG",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": null,
                            "metadata": {
                                "id": "1*xKqPbTPlIr3WIbT88PwN3Q.png",
                                "originalWidth": 1282,
                                "originalHeight": 450
                            }
                        },
                        {
                            "name": "d6d7",
                            "text": "Now, after the containers have been created, we will be able to activate a Debezium source connector for Kafka Connect. The data format we shall be using is the Avro data format. Avro is a row-oriented remote procedure call and data serialization framework developed within Apache’s Hadoop project. It uses JSON for defining data types and protocols, and serialises data in a compact binary format.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://avro.apache.org",
                                    "userId": null,
                                    "start": 161,
                                    "end": 177,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://hadoop.apache.org",
                                    "userId": null,
                                    "start": 274,
                                    "end": 297,
                                    "anchorType": "LINK"
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "a605",
                            "text": "Let’s create another file with the configurations for our Debezium Connector.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "fe5d",
                            "text": "",
                            "type": "IFRAME",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": {
                                "mediaResource": {
                                    "href": "https://gist.github.com/mdhishaamakhtar/86692182ae24537fff550d704dd2f479",
                                    "iframeSrc": "",
                                    "iframeWidth": 0,
                                    "iframeHeight": 0
                                }
                            },
                            "metadata": null
                        },
                        {
                            "name": "85b3",
                            "text": "As we can see, we have configured the details of the database in this as well as the database to read changes from. Make sure to change the values of MYSQL_USER and MYSQL_PASSWORD to whatever you had configured earlier. Now, we shall run a command to register this in Kafka Connect. The command is as follows:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 150,
                                    "end": 160,
                                    "anchorType": null
                                },
                                {
                                    "title": null,
                                    "type": "CODE",
                                    "href": null,
                                    "userId": null,
                                    "start": 165,
                                    "end": 179,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "ef8e",
                            "text": "",
                            "type": "IFRAME",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": {
                                "mediaResource": {
                                    "href": "https://gist.github.com/mdhishaamakhtar/861db08adddc706c739167aec27d7c18",
                                    "iframeSrc": "",
                                    "iframeWidth": 0,
                                    "iframeHeight": 0
                                }
                            },
                            "metadata": null
                        },
                        {
                            "name": "43ae",
                            "text": "Now, the Debezium should be able to read the database changes from Kafka.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "d823",
                            "text": "The next step involves reading the data from Kafka using Spark and Hudi and putting them into Google Cloud Storage Bucket in Hudi file format. Before we start using them, let’s understand what Hudi and Spark are.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "d513",
                            "text": "Apache Hudi is an open-source data management framework used to simplify incremental data processing and data pipeline development. This framework more efficiently manages business requirements like data lifecycle and improves data quality. Hudi enables you to manage data at the record-level on cloud based data lakes to simplify Change Data Capture (CDC) and streaming data ingestion and helps to handle data privacy use cases requiring record level updates and deletes. Data sets managed by Hudi are stored in a cloud storage bucket using open storage formats, while integrations with Presto, Apache Hive and/or Apache Spark gives near real-time access to updated data using familiar tools.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://hive.apache.org",
                                    "userId": null,
                                    "start": 596,
                                    "end": 607,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://spark.apache.org",
                                    "userId": null,
                                    "start": 615,
                                    "end": 627,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 0,
                                    "end": 11,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "9ebe",
                            "text": "Apache Spark is an open-source unified analytics engine for large-scale data processing. Spark provides an interface for programming clusters with implicit data parallelism and fault tolerance. Originally developed at the University of California, Berkeley’s AMPLab, the Spark codebase was later donated to the Apache Software Foundation, which has maintained it since.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 0,
                                    "end": 12,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "1595",
                            "text": "Now, since we are building a solution on Google Cloud, the best way to go about this would be to use Google Cloud Dataproc. Google Cloud Dataproc is a managed service for processing large datasets, such as those used in big data initiatives. Dataproc is part of Google Cloud Platform, Google’s public cloud offering. Dataproc helps users process, transform and understand vast quantities of data.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://cloud.google.com/dataproc",
                                    "userId": null,
                                    "start": 101,
                                    "end": 122,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": null,
                                    "type": "STRONG",
                                    "href": null,
                                    "userId": null,
                                    "start": 149,
                                    "end": 240,
                                    "anchorType": null
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "4239",
                            "text": "Inside the Google Dataproc instance, Spark and all the required libraries are preinstalled. After we have created the instance, we can run the following spark job in it to complete our pipeline:",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "9d97",
                            "text": "",
                            "type": "IFRAME",
                            "href": null,
                            "layout": "INSET_CENTER",
                            "markups": [],
                            "iframe": {
                                "mediaResource": {
                                    "href": "https://gist.github.com/mdhishaamakhtar/d64a299e4beda9a919df0d6a0ae29ec8",
                                    "iframeSrc": "",
                                    "iframeWidth": 0,
                                    "iframeHeight": 0
                                }
                            },
                            "metadata": null
                        },
                        {
                            "name": "3e0c",
                            "text": "This would run a spark job that fetches the data from the Kafka that we pushed earlier to and writes it to a Google Cloud Storage Bucket. We have to specify the Kafka Topic, the Schema Registry URL and other relevant configurations.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "6bfa",
                            "text": "Conclusion",
                            "type": "H3",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "647d",
                            "text": "There are several ways in which a data lake can be architected. I have tried to show how to build a data lake using Debezium, Kafka, Hudi, Spark and Google Cloud. Using a setup like this, one can easily scale the pipeline to manage huge data workloads! For more details into each technology, the documentation can be visited. The Spark Job can be customized to have much more fine-grained control. The Hudi shown here can also be integrated with Presto, Hive or Trino. The number of customizations are endless. This article provides one with a basic intro on how one can build a basic data pipeline using the above tools!",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://debezium.io",
                                    "userId": null,
                                    "start": 116,
                                    "end": 124,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://kafka.apache.org",
                                    "userId": null,
                                    "start": 126,
                                    "end": 131,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://hudi.apache.org",
                                    "userId": null,
                                    "start": 133,
                                    "end": 137,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://spark.apache.org",
                                    "userId": null,
                                    "start": 139,
                                    "end": 144,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://prestodb.io",
                                    "userId": null,
                                    "start": 446,
                                    "end": 452,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://hive.apache.org",
                                    "userId": null,
                                    "start": 454,
                                    "end": 458,
                                    "anchorType": "LINK"
                                },
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://trino.io",
                                    "userId": null,
                                    "start": 462,
                                    "end": 467,
                                    "anchorType": "LINK"
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "816f",
                            "text": "If you’ve enjoyed this story, please click the 👏 button and share it, so that others can find it as well! Also, feel free to leave a comment below.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [],
                            "iframe": null,
                            "metadata": null
                        },
                        {
                            "name": "1ef7",
                            "text": "Groww Engineering publishes technical anecdotes, the latest technologies, and better ways to tackle common programming problems. You can subscribe here to get the latest updates.",
                            "type": "P",
                            "href": null,
                            "layout": null,
                            "markups": [
                                {
                                    "title": "",
                                    "type": "A",
                                    "href": "https://medium.com/groww-engineering",
                                    "userId": null,
                                    "start": 137,
                                    "end": 151,
                                    "anchorType": "LINK"
                                }
                            ],
                            "iframe": null,
                            "metadata": null
                        }
                    ]
                }
            }
        }
    }
}